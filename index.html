<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shuffling a grid using CSS properties</title>
    <link rel="stylesheet" href="pagestyles.css">
    <style>
        body {
            font-family: sans-serif;
        }
        #contentgrid {
            display: grid;
            gap: 20px;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }
    </style>
</head>
<body>
    <h1>Shuffling grid items using CSS properties</h1>
    <div id="contentgrid">
        <div id="about">
            <h2>About</h2>
            <p>This is the order.html file.</p>
        </div>
        <div id="news">
            <h2>News</h2>
            <p>Latest news will be displayed here.</p>
        </div>
        <div id="contact">
            <h2>Contact</h2>
            <p>Contact information will be displayed here.</p>
        </div>  
        <div id="casestudies">
            <h2>Case Studies</h2>
            <p>Case studies will be displayed here.</p>
        </div>
    </div>
    <button>Rotate</button>


<pre>
#contentgrid {
    --items: 4;
    --item1-order: 1;
    --item2-order: 1;
    --item3-order: 1;
    --item4-order: 1;
    display: grid;
    gap: 20px;
    grid-template-columns: repeat(
        auto-fit, minmax(200px, 1fr)
    );
}
#about { order: var(--item1-order); }
#news { order: var(--item2-order); }
#contact { order: var(--item3-order); }
#casestudies { order: var(--item4-order); }        
    </pre>
<pre>
let root = document.querySelector('#contentgrid');
let itemcount = getComputedStyle(root).
    getPropertyValue('--items');
let old = 1;
const shuffleorder = () => {
    let random = Math.floor(Math.random() * itemcount) + 1;
    root.style.setProperty('--item' + old + '-order', 1);
    root.style.setProperty('--item' + random + '-order', 0);
    old = random;
};
shuffleorder();
</pre>    
    <script>
        let root = document.querySelector('#contentgrid');
        let cssvar = `--item$x-order`;
        // Get the amount of items
        let elms = root.querySelectorAll(
            root.firstElementChild.tagName
        );
        all = elms.length;
        // Initialize the order array and set the order on the items
        let orders = [];
        for (let i = 1; i <= all; i++) {
            orders.push(i);
            elms[i - 1].style.setProperty(
                'order', 'var(' + cssvar.replace('$x', i) + ')'
            );
            root.style.setProperty(cssvar.replace('$x', i), i);
        }
        // Rotate the order array and set the CSS variables accordingly
        const rotategrid = () => {
            orders.push(orders.shift());
            orders.forEach((i, k) => {
                root.style.setProperty(
                    cssvar.replace('$x', k + 1), orders[k]
                );
            })
        };
        rotategrid();
        document.querySelector('button').addEventListener('click',rotategrid);
    </script>
    <nav></nav>
    <script src="nav.js"></script>
</body>
</html>




